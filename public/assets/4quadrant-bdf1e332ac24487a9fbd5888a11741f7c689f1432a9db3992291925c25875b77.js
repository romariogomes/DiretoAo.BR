$(document).ready(function(){function t(t,e){return e===undefined&&(e=1),[t[0]-e,t[1]+e]}$(window).width()<450?$("#scatter").attr("width","350").attr("height","350"):$(window).width()<300&&$("#scatter").attr("width","350").attr("height","300");var e=d3.select("#scatter"),a={top:20,right:20,bottom:30,left:50},n=+e.attr("width"),r=+e.attr("height"),c=n-a.left-a.right,o=r-a.top-a.bottom,i=d3.scaleLinear().domain(t([1,5])).range(t([0,c])),s=d3.scaleLinear().domain(t([1,5])).range(t([o,0])),l=e.append("g").attr("transform","translate("+a.top+","+a.top+")");l.append("rect").attr("width",n-a.left-a.right).attr("height",r-a.top-a.bottom).attr("fill","#F6F6F6"),d3.json("../spectreData.json",function(t,e){if(t)throw t;e.forEach(function(t){t.consequence=+t.consequence,t.value=+t.value}),l.selectAll("circle").data(e).enter().append("circle").attr("class","dot").attr("r",7).attr("cx",function(t){return i(t.consequence)}).attr("cy",function(t){return s(t.value)}).style("fill",function(t){return t.value>=3&&t.consequence<=3?"#666666":t.value>=3&&t.consequence>=3?"#666666":(t.value<=3&&t.consequence,"#666666")}),l.append("g").attr("class","x axis").attr("transform","translate(0,"+s.range()[0]/2+")").call(d3.axisBottom(i).ticks(5)),l.append("g").attr("class","y axis").attr("transform","translate("+i.range()[1]/2+", 0)").call(d3.axisLeft(s).ticks(5)),$("g.tick").remove()}),d3.select(self.frameElement).style("height","700px"),$(window).resize(function(){location.reload()})});